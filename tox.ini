[tox]
envlist = python, node, go, openjdk
isolated_build = True
require_locked_deps = true
install_dev_deps = true

[tox:.package]
basepython = python3

[testenv]
allowlist_externals =
    docker
    podman
    pytest
commands =
    m8a-fetch-language-containers {envname}
    # -n auto tells pytest to use as many processors as detected
    # to run all the tests from the module test_{envname} in parallel
    pytest -n auto test_{envname}.py []

[testenv:fetch-all]
commands =
    m8a-fetch-all-containers

[testenv:list-all]
commands =
    m8s-list-containers
